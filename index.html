<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Elite Portfolio - Configurable via JSON">
    <title id="pageTitle">Portfolio</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Hero Canvas Background -->
    <canvas id="heroCanvas" class="hero-canvas"></canvas>

    <!-- Scroll Progress Bar -->
    <div class="scroll-progress"></div>

    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-dot"></div>

    <!-- Navbar -->
    <nav class="navbar">
        <a href="#home" class="nav-logo">
            <span class="first" id="firstName">First</span>
            <span class="last" id="lastName">Last</span>
        </a>

        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#work">Work</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#volunteer">Volunteer</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>

        <div class="nav-actions">
            <a href="#" class="nav-btn" id="cvButton">CV ↗</a>
            <a href="#" target="_blank" class="nav-icon" id="linkedinIcon">
                <i class="fab fa-linkedin"></i>
            </a>
            <a href="#" target="_blank" class="nav-icon" id="githubIcon">
                <i class="fab fa-github"></i>
            </a>
            <a href="#" target="_blank" class="nav-icon" id="twitterIcon">
                <i class="fab fa-x-twitter"></i>
            </a>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="#home">Home</a>
        <a href="#about">About</a>
        <a href="#work">Work</a>
        <a href="#projects">Projects</a>
        <a href="#volunteer">Volunteer</a>
        <a href="#contact">Contact</a>
        <a href="#" id="cvButtonMobile">Download CV</a>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- HOME SECTION -->
        <section id="home">
            <div class="home-content">
                <div class="home-text">
                    <h1 class="hero-heading">
                        <span id="typewriter"></span><span class="hero-cursor">|</span>
                    </h1>
                    <p class="home-bio" id="homeBio"></p>
                    <div class="home-buttons">
                        <a href="#projects" class="btn btn-primary">See My Work →</a>
                        <a href="#about" class="btn btn-secondary">About Me</a>
                    </div>
                    <div class="social-links">
                        <a href="#" target="_blank" class="social-link" id="socialLinkedin">
                            <i class="fab fa-linkedin"></i> LINKEDIN
                        </a>
                        <a href="#" target="_blank" class="social-link" id="socialGithub">
                            <i class="fab fa-github"></i> GITHUB
                        </a>
                        <a href="#" class="social-link" id="socialEmail">
                            <i class="fas fa-envelope"></i> EMAIL
                        </a>
                        <a href="#" target="_blank" class="social-link" id="socialTwitter">
                            <i class="fab fa-x-twitter"></i> X
                        </a>
                    </div>
                </div>

                <div class="home-image">
                    <div class="profile-placeholder">
                        <img src="" alt="Profile" id="profileImage">
                    </div>
                </div>
            </div>
        </section>

        <!-- ABOUT SECTION -->
        <section id="about">
            <div class="section-label">ABOUT</div>
            <h2 class="section-heading">Where I <span class="highlight">studied</span></h2>

            <!-- Education individual cards -->
            <div class="edu-cards-row" id="educationCardsGrid"></div>

            <div class="about-grid">
                <div class="about-card edu-modules-card">
                    <h3>Key Modules</h3>
                    <ul id="modulesList"></ul>
                </div>

                <div class="about-bio">
                    <h2 class="section-heading" style="margin-top: 0; font-size: 2rem;">Who I <span class="highlight">am</span></h2>
                    <div id="bioContent"></div>

                    <div class="counter-row">
                        <div class="counter">
                            <div class="counter-number" id="projectCount">0</div>
                            <div class="counter-label">PROJECTS</div>
                        </div>
                        <div class="counter">
                            <div class="counter-number" id="orgCount">0</div>
                            <div class="counter-label">ORGANIZATIONS</div>
                        </div>
                        <div class="counter">
                            <div class="counter-number" id="yearCount">0</div>
                            <div class="counter-label">YEARS IN TECH</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- WORK SECTION -->
        <section id="work">
            <div class="section-label">EXPERIENCE</div>
            <h2 class="section-heading">Where I've <span class="highlight">worked</span></h2>

            <div class="timeline">
                <div class="timeline-items" id="workContainer"></div>
            </div>
        </section>

        <!-- PROJECTS SECTION -->
        <section id="projects">
            <div class="section-label">PROJECTS</div>
            <h2 class="section-heading">What I've <span class="highlight">built</span></h2>

            <div class="project-filters" id="projectFilters"></div>
            <div class="projects-grid" id="projectsContainer"></div>
        </section>

        <!-- VOLUNTEER SECTION -->
        <section id="volunteer">
            <div class="section-label">VOLUNTEER</div>
            <h2 class="section-heading">How I give <span class="highlight">back</span></h2>

            <div class="volunteer-grid" id="volunteerContainer"></div>
        </section>

        <!-- CONTACT SECTION -->
        <section id="contact">
            <div class="section-label">CONTACT</div>
            <h2 class="section-heading">Let's <span class="highlight">talk</span></h2>

            <div class="contact-content">
                <div class="contact-left">
                    <h3 id="contactHeading"></h3>
                    <p id="contactMessage"></p>

                    <div class="contact-methods">
                        <a href="#" class="contact-method" id="contactEmail">
                            <i class="fas fa-envelope"></i>
                            <span id="emailText"></span>
                        </a>
                        <a href="#" target="_blank" class="contact-method" id="contactLinkedin">
                            <i class="fab fa-linkedin"></i>
                            <span>LinkedIn</span>
                        </a>
                        <a href="#" target="_blank" class="contact-method" id="contactGithub">
                            <i class="fab fa-github"></i>
                            <span>GitHub</span>
                        </a>
                    </div>
                </div>

                <div class="contact-form">
                    <form id="contactFormElement">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" placeholder="Your name" required>
                        </div>

                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" placeholder="your@email.com" required>
                        </div>

                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" placeholder="Tell me about your project..." required></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                    </form>
                </div>
            </div>
        </section>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-content">
            <p class="footer-text" id="footerText"></p>
            <div class="footer-links">
                <a href="#" target="_blank" class="footer-link" id="footerLinkedin">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="#" target="_blank" class="footer-link" id="footerGithub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="#" class="footer-link" id="footerEmail">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="#" target="_blank" class="footer-link" id="footerTwitter">
                    <i class="fab fa-x-twitter"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>

        // Load configuration from JSON file
        async function loadConfig() {
            try {
                const response = await fetch('static_private_info.json');
                if (!response.ok) {
                    console.error('Failed to load config: ' + response.status);
                    showError('Configuration file not found. Please create static_private_info.json');
                    return;
                }
                config = await response.json();
                applyTheme();
                populateContent();
            } catch (error) {
                console.error('Error loading config:', error);
                showError('Error loading portfolio configuration. See console for details.');
            }
        }

        // Show error message
        function showError(message) {
            document.body.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: #111111; color: #ffffff; font-family: Inter, sans-serif; text-align: center; padding: 2rem;">
                    <div>
                        <h1 style="margin-bottom: 1rem;">⚠️ Configuration Error</h1>
                        <p style="font-size: 1.1rem; margin-bottom: 2rem;">${message}</p>
                        <p style="color: #b8b8b8; margin-bottom: 1rem;">Please ensure <code>static_private_info.json</code> exists and is valid JSON.</p>
                        <p style="color: #b8b8b8; margin-top: 2rem; font-size: 0.9rem;">
                            Need help? Copy <code>static_private_info.example.json</code> to <code>static_private_info.json</code>
                        </p>
                    </div>
                </div>
            `;
        }

        /* ==================== APPLY THEME ==================== */
        function applyTheme() {
            if (!config.theme) return;

            const root = document.documentElement;
            root.style.setProperty('--primary-pink', config.theme.primaryPink);
            root.style.setProperty('--deep-rose', config.theme.deepRose);
            root.style.setProperty('--dark-bg', config.theme.darkBackground);
            root.style.setProperty('--light-bg', config.theme.lightBackground);
            root.style.setProperty('--text-light', config.theme.darkText);
            root.style.setProperty('--text-dark', config.theme.lightText);
            root.style.setProperty('--text-secondary-light', config.theme.darkSecondaryText);
            root.style.setProperty('--text-secondary-dark', config.theme.lightSecondaryText);

            // Set default theme mode
            if (config.theme.defaultMode === 'light') {
                document.body.classList.add('light-mode');
            }
        }

        /* ==================== POPULATE CONTENT ==================== */
        function populateContent() {
            if (!config) return;

            // Page title
            if (config.personal) {
                const title = `${config.personal.firstName} ${config.personal.lastName}`;
                document.getElementById('pageTitle').textContent = title;

                // Navbar
                document.getElementById('firstName').textContent = config.personal.firstName;
                document.getElementById('lastName').textContent = config.personal.lastName;
                document.getElementById('homeBio').textContent = `${config.personal.bio} · ${config.personal.location}`;
            }

            // Social links
            if (config.social) {
                const linkedinUrl = config.social.linkedin;
                const githubUrl = config.social.github;
                const email = config.personal.email;

                document.getElementById('cvButton').href = config.files.resume;
                document.getElementById('linkedinIcon').href = linkedinUrl;
                document.getElementById('githubIcon').href = githubUrl;

                document.getElementById('socialLinkedin').href = linkedinUrl;
                document.getElementById('socialGithub').href = githubUrl;
                document.getElementById('socialEmail').href = `mailto:${email}`;

                document.getElementById('contactLinkedin').href = linkedinUrl;
                document.getElementById('contactGithub').href = githubUrl;
                document.getElementById('contactEmail').href = `mailto:${email}`;
                document.getElementById('contactEmail').querySelector('span').textContent = email;

                document.getElementById('emailText').textContent = email;
                document.getElementById('cvButtonMobile').href = config.files.resume;

                document.getElementById('footerLinkedin').href = linkedinUrl;
                document.getElementById('footerGithub').href = githubUrl;
                document.getElementById('footerEmail').href = `mailto:${email}`;
            }

            // Profile image
            if (config.files && config.files.profileImage) {
                document.getElementById('profileImage').src = config.files.profileImage;
            }

            // About section
            if (config.about) {
                const edu = config.about.education;
                document.getElementById('institution').innerHTML = `<span style="font-size: 1.3rem;">${edu.degree}</span><br><span style="font-size: 0.95rem; color: var(--text-secondary-light);">${edu.institution}</span>`;

                let eduHtml = `
                    <li><strong>GPA:</strong> ${edu.gpa}</li>
                    <li><strong>Graduation:</strong> ${edu.graduationDate}</li>
                `;
                document.getElementById('educationList').innerHTML = eduHtml;

                let modulesHtml = edu.modules.map(m => `<li>${m}</li>`).join('');
                document.getElementById('modulesList').innerHTML = modulesHtml;

                let bioHtml = config.about.paragraphs.map(p => `<p>${p}</p>`).join('');
                document.getElementById('bioContent').innerHTML = bioHtml;

                document.getElementById('projectCount').textContent = config.about.stats.projectsCompleted;
                document.getElementById('orgCount').textContent = config.about.stats.organizationsWorked;
                document.getElementById('yearCount').textContent = config.about.stats.yearsInTech;
            }

            // Work experience
            if (config.experience) {
                let workHtml = config.experience.map(job => `
                    <div class="timeline-item">
                        <div class="work-card">
                            <h3>${job.title}</h3>
                            <h4>${job.company}</h4>
                            <div class="work-date">${job.location} · ${job.startDate} - ${job.endDate}</div>
                            <ul>
                                ${job.highlights.map(h => `<li>${h}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `).join('');
                document.getElementById('workContainer').innerHTML = workHtml;
            }

            // Projects
            if (config.projects) {
                // Generate filter pills
                const categories = new Set();
                config.projects.forEach(p => {
                    p.category.split(' ').forEach(c => categories.add(c));
                });

                let filterHtml = '<button class="filter-pill active" data-filter="all">All</button>';
                categories.forEach(cat => {
                    filterHtml += `<button class="filter-pill" data-filter="${cat}">${cat.charAt(0).toUpperCase() + cat.slice(1)}</button>`;
                });
                document.getElementById('projectFilters').innerHTML = filterHtml;

                // Generate project cards
                let projectsHtml = config.projects.map(proj => `
                    <div class="project-card" data-category="${proj.category}">
                        <div class="project-header">
                            <h3>${proj.title}</h3>
                            <p class="project-desc">${proj.description}</p>
                        </div>
                        <div class="project-body">
                            <div class="tech-stack">
                                ${proj.tags.map(tag => `<span class="tech-tag">${tag}</span>`).join('')}
                            </div>
                            <div class="project-links">
                                ${proj.links.github ? `<a href="${proj.links.github}" target="_blank" class="project-link">GitHub</a>` : ''}
                                ${proj.links.demo ? `<a href="${proj.links.demo}" target="_blank" class="project-link">Live Demo</a>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                document.getElementById('projectsContainer').innerHTML = projectsHtml;
            }

            // Volunteer
            if (config.volunteer) {
                let volunteerHtml = config.volunteer.map(vol => `
                    <div class="volunteer-card">
                        <div class="volunteer-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>${vol.organization}</h3>
                        <div class="volunteer-role">${vol.role}</div>
                        <div class="volunteer-date">${vol.startDate} - ${vol.endDate}</div>
                        <p class="volunteer-desc">${vol.description}</p>
                    </div>
                `).join('');
                document.getElementById('volunteerContainer').innerHTML = volunteerHtml;
            }

            // Contact
            if (config.contact) {
                document.getElementById('contactHeading').textContent = config.contact.heading;
                document.getElementById('contactMessage').textContent = config.contact.message;
            }

            // Footer
            if (config.footer) {
                document.getElementById('footerText').textContent = `${config.footer.credit} · ${config.footer.copyright}`;
            }

            // Re-attach event listeners after populating
            attachEventListeners();
        }

        /* ==================== TYPEWRITER EFFECT ==================== */
        function initTypewriter() {
            const words = ['decisions.', 'clarity.', 'impact.', 'stories.'];
            let wordIndex = 0;
            let letterIndex = 0;
            let isDeleting = false;
            const typewriterElement = document.getElementById('typewriter');

            function typewriter() {
                const currentWord = words[wordIndex];

                if (isDeleting) {
                    typewriterElement.textContent = currentWord.substring(0, letterIndex - 1);
                    letterIndex--;
                } else {
                    typewriterElement.textContent = currentWord.substring(0, letterIndex + 1);
                    letterIndex++;
                }

                if (!isDeleting && letterIndex === currentWord.length) {
                    setTimeout(() => { isDeleting = true; }, 1500);
                } else if (isDeleting && letterIndex === 0) {
                    isDeleting = false;
                    wordIndex = (wordIndex + 1) % words.length;
                }

                setTimeout(typewriter, isDeleting ? 50 : 100);
            }

            typewriter();
        }

        /* ==================== SCROLL PROGRESS ==================== */
        function initScrollProgress() {
            const scrollProgress = document.querySelector('.scroll-progress');

            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                scrollProgress.style.width = scrollPercent + '%';
            });
        }

        /* ==================== CUSTOM CURSOR ==================== */
        function initCursor() {
            const cursor = document.querySelector('.cursor');
            const cursorDot = document.querySelector('.cursor-dot');
            let mouseX = 0;
            let mouseY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;

                cursor.style.left = (mouseX - 10) + 'px';
                cursor.style.top = (mouseY - 10) + 'px';

                cursorDot.style.left = (mouseX - 4) + 'px';
                cursorDot.style.top = (mouseY - 4) + 'px';
            });

            document.addEventListener('mouseenter', () => {
                cursor.classList.add('active');
                cursorDot.classList.add('active');
            });

            document.addEventListener('mouseleave', () => {
                cursor.classList.remove('active');
                cursorDot.classList.remove('active');
            });
        }

        /* ==================== NAVBAR SCROLL ==================== */
        function initNavbar() {
            const navbar = document.querySelector('.navbar');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        }

        /* ==================== THEME TOGGLE ==================== */
        function initThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');

            const savedTheme = localStorage.getItem('theme') || (config.theme?.defaultMode || 'dark');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }

            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-mode');

                if (document.body.classList.contains('light-mode')) {
                    localStorage.setItem('theme', 'light');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    localStorage.setItem('theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            });
        }

        /* ==================== HAMBURGER MENU ==================== */
        function initHamburger() {
            const hamburger = document.getElementById('hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileLinks = mobileMenu.querySelectorAll('a');

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                mobileMenu.classList.toggle('active');
            });

            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    mobileMenu.classList.remove('active');
                });
            });
        }

        /* ==================== INTERSECTION OBSERVER ==================== */
        function initObserver() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('scroll-animate-left');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.work-card, .volunteer-card, .project-card').forEach(el => {
                observer.observe(el);
            });
        }

        /* ==================== PROJECT FILTERING ==================== */
        function initProjectFiltering() {
            const filterPills = document.querySelectorAll('.filter-pill');
            const projectCards = document.querySelectorAll('.project-card');

            filterPills.forEach(pill => {
                pill.addEventListener('click', () => {
                    filterPills.forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');

                    const filterValue = pill.getAttribute('data-filter');

                    projectCards.forEach(card => {
                        if (filterValue === 'all') {
                            card.classList.remove('hidden');
                        } else {
                            const cardCategory = card.getAttribute('data-category');
                            if (cardCategory.includes(filterValue)) {
                                card.classList.remove('hidden');
                            } else {
                                card.classList.add('hidden');
                            }
                        }
                    });
                });
            });
        }

        /* ==================== BACK TO TOP ==================== */
        function initBackToTop() {
            const backToTop = document.getElementById('backToTop');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTop.classList.add('show');
                } else {
                    backToTop.classList.remove('show');
                }
            });

            backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        /* ==================== SMOOTH SCROLLING ==================== */
        function initSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#') {
                        e.preventDefault();
                        const target = document.querySelector(href);
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });
        }

        /* ==================== FORM HANDLING ==================== */
        function initFormHandling() {
            const contactForm = document.getElementById('contactFormElement');
            if (contactForm) {
                contactForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const message = document.getElementById('message').value;

                    const subject = `New Message from ${name}`;
                    const body = `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`;

                    window.location.href = `mailto:${config.personal.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

                    contactForm.reset();
                });
            }
        }

        /* ==================== ATTACH ALL EVENT LISTENERS ==================== */
        function attachEventListeners() {
            initProjectFiltering();
            initObserver();
        }

        /* ==================== INIT ALL ==================== */
        async function initAll() {
            await loadConfig();

            if (!config || Object.keys(config).length === 0) return;

            initTypewriter();
            initScrollProgress();
            initCursor();
            initNavbar();
            initThemeToggle();
            initHamburger();
            initBackToTop();
            initSmoothScroll();
            initFormHandling();
            attachEventListeners();
        }

        // Start on page load
        document.addEventListener('DOMContentLoaded', initAll);
    </script>
</body>
</html>
